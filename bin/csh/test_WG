#!/bin/csh -f


########
# wget or curl
########
set WGET = ( `which wget` )
set WG = "-N"
set nWGET = 0
if ( $#WGET > 1 ) then
  # try curl
  set WGET = (`which /usr/bin/curl`)
  if ( $#WGET > 1 ) then
    set WGET = ( `which curl` )
    if ( $#WGET > 1 ) then
      echo "Cant find wget or curl ..." >>& /dev/stderr
      exit 1;
    endif
  endif
  set nWGET = 1
  set WG = "-L -R --create-dirs -o"
endif

# deal with / in sed
set WGET_ = `echo $WGET | sed 's/\//Qq/g'`
set WG_ = `echo $WG| sed 's/ /Qq/g'`
set q = '\/'

sed < ${BPMS}/src/makefile 's/__WG__/'$WG_'/' | sed 's/Qq/ /g' > $TMP/tmp.$$
mv $TMP/tmp.$$ ${BPMS}/src/makefile

sed < ${BPMS}/src/makefile 's/__WGET__/'$WGET_'/' | sed 's/Qq/'$q'/g' > $TMP/tmp.$$
mv $TMP/tmp.$$ ${BPMS}/src/makefile
echo "**WGET=$WGET $WG"

