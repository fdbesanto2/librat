#! /bin/sh
# Run this file to recreate the current configuration.

SHELL=${CONFIG_SHELL-/bin/sh}
export SHELL

CCS=("gcc" "cc")
CFLAGSS=("-I." "-fPIC")
DYNS=("ld -G" "libtool  -L.. -lc -dynamic -undefined dynamic_lookup")
MAKES=("gmake" "make")
OPTS=("-g")

# specify a temporary directory
set TMP = /tmp

ARCH=$(uname -m)
HERE=$(pwd)
BPMS=${BPMS-$HERE}

# fixers
q='\/'
BPMS_=$(echo $BPMS | sed 's/\//Qq/g')
# initialise makefile
sed < $BPMS/src/Makefile.in 's/@BPMS@/'$BPMS_'/' | sed 's/Qq/'$q'/g' | sed 's/@ARCH@/'$ARCH'/' > $BPMS/src/makefile

mkdir -p bin/${ARCH}
PATH=".:bin:bin/${ARCH}:${PATH}"

for CC_ in $CCS
do
  which $CC_ > /dev/null 2>&1
  if $? = 0; then
    CC=${CC_}
    break
  fi
done
echo $CC
